{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/km/git/splendid-nudibranch/client/src/photos/photo.js\";\nimport { PureComponent } from \"react\";\nimport PhotoText from \"./photo-text\";\nimport TransitionImage from \"../transition-image\";\n\nfunction sizes(photo) {\n  return photo.mode === \"portrait\" ? \"(min-width: 1100px) 50vw, 100vw\" : \"(min-width: 1100px) 95vw, 100vw\";\n}\n\nclass Photo extends PureComponent {\n  constructor(props) {\n    super();\n    this.preload(props.preloadPhotos);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.preload(nextProps.preloadPhotos);\n  }\n\n  componentWillUnmount() {\n    if (this.el) {\n      this.el.removeChild(this.el.querySelector(\"img\"));\n    }\n  }\n\n  preload(photos) {\n    if (this.timeout) {\n      window.clearTimeout(this.timeout);\n    }\n\n    this.timeout = setTimeout(() => {\n      photos.forEach((photo, index) => {\n        const image = new Image();\n        image.src = photo.sizes.large.url;\n        image.setAttribute(\"srcset\", photo.srcSet);\n        image.setAttribute(\"sizes\", sizes(photo));\n        const key = `snPreloadedPhoto${index}`;\n        window[key] = image;\n      });\n    }, 1000);\n  }\n\n  render() {\n    const {\n      next,\n      previous,\n      photo\n    } = this.props;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      class: photo.mode,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"photo-and-text\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"photo-wrapper\",\n          ref: el => this.el = el,\n          children: [previous, next, /*#__PURE__*/_jsxDEV(\"img\", {\n            alt: photo.title,\n            srcSet: photo.srcSet,\n            sizes: sizes(photo)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(PhotoText, {\n          photo: photo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Photo;","map":{"version":3,"sources":["/home/km/git/splendid-nudibranch/client/src/photos/photo.js"],"names":["PureComponent","PhotoText","TransitionImage","sizes","photo","mode","Photo","constructor","props","preload","preloadPhotos","componentWillReceiveProps","nextProps","componentWillUnmount","el","removeChild","querySelector","photos","timeout","window","clearTimeout","setTimeout","forEach","index","image","Image","src","large","url","setAttribute","srcSet","key","render","next","previous","title"],"mappings":";;AAAA,SAASA,aAAT,QAA8B,OAA9B;AAEA,OAAOC,SAAP,MAAsB,cAAtB;AACA,OAAOC,eAAP,MAA4B,qBAA5B;;AAEA,SAASC,KAAT,CAAeC,KAAf,EAAsB;AACpB,SAAOA,KAAK,CAACC,IAAN,KAAe,UAAf,GACH,iCADG,GAEH,iCAFJ;AAGD;;AAED,MAAMC,KAAN,SAAoBN,aAApB,CAAkC;AAChCO,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB;AACA,SAAKC,OAAL,CAAaD,KAAK,CAACE,aAAnB;AACD;;AAEDC,EAAAA,yBAAyB,CAACC,SAAD,EAAY;AACnC,SAAKH,OAAL,CAAaG,SAAS,CAACF,aAAvB;AACD;;AAEDG,EAAAA,oBAAoB,GAAG;AACrB,QAAI,KAAKC,EAAT,EAAa;AACX,WAAKA,EAAL,CAAQC,WAAR,CAAoB,KAAKD,EAAL,CAAQE,aAAR,CAAsB,KAAtB,CAApB;AACD;AACF;;AAEDP,EAAAA,OAAO,CAACQ,MAAD,EAAS;AACd,QAAI,KAAKC,OAAT,EAAkB;AAChBC,MAAAA,MAAM,CAACC,YAAP,CAAoB,KAAKF,OAAzB;AACD;;AAED,SAAKA,OAAL,GAAeG,UAAU,CAAC,MAAM;AAC9BJ,MAAAA,MAAM,CAACK,OAAP,CAAe,CAAClB,KAAD,EAAQmB,KAAR,KAAkB;AAC/B,cAAMC,KAAK,GAAG,IAAIC,KAAJ,EAAd;AACAD,QAAAA,KAAK,CAACE,GAAN,GAAYtB,KAAK,CAACD,KAAN,CAAYwB,KAAZ,CAAkBC,GAA9B;AACAJ,QAAAA,KAAK,CAACK,YAAN,CAAmB,QAAnB,EAA6BzB,KAAK,CAAC0B,MAAnC;AACAN,QAAAA,KAAK,CAACK,YAAN,CAAmB,OAAnB,EAA4B1B,KAAK,CAACC,KAAD,CAAjC;AACA,cAAM2B,GAAG,GAAI,mBAAkBR,KAAM,EAArC;AACAJ,QAAAA,MAAM,CAACY,GAAD,CAAN,GAAcP,KAAd;AACD,OAPD;AAQD,KATwB,EAStB,IATsB,CAAzB;AAUD;;AAEDQ,EAAAA,MAAM,GAAG;AACP,UAAM;AAAEC,MAAAA,IAAF;AAAQC,MAAAA,QAAR;AAAkB9B,MAAAA;AAAlB,QAA4B,KAAKI,KAAvC;AACA,wBACE;AAAK,MAAA,KAAK,EAAEJ,KAAK,CAACC,IAAlB;AAAA,6BACE;AAAK,QAAA,KAAK,EAAC,gBAAX;AAAA,gCACE;AAAK,UAAA,KAAK,EAAC,eAAX;AAA2B,UAAA,GAAG,EAAGS,EAAD,IAAS,KAAKA,EAAL,GAAUA,EAAnD;AAAA,qBACGoB,QADH,EAEGD,IAFH,eAGE;AAAK,YAAA,GAAG,EAAE7B,KAAK,CAAC+B,KAAhB;AAAuB,YAAA,MAAM,EAAE/B,KAAK,CAAC0B,MAArC;AAA6C,YAAA,KAAK,EAAE3B,KAAK,CAACC,KAAD;AAAzD;AAAA;AAAA;AAAA;AAAA,kBAHF;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAME,QAAC,SAAD;AAAW,UAAA,KAAK,EAAEA;AAAlB;AAAA;AAAA;AAAA;AAAA,gBANF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADF;AAYD;;AA/C+B;;AAkDlC,eAAeE,KAAf","sourcesContent":["import { PureComponent } from \"react\";\n\nimport PhotoText from \"./photo-text\";\nimport TransitionImage from \"../transition-image\";\n\nfunction sizes(photo) {\n  return photo.mode === \"portrait\"\n    ? \"(min-width: 1100px) 50vw, 100vw\"\n    : \"(min-width: 1100px) 95vw, 100vw\";\n}\n\nclass Photo extends PureComponent {\n  constructor(props) {\n    super();\n    this.preload(props.preloadPhotos);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.preload(nextProps.preloadPhotos);\n  }\n\n  componentWillUnmount() {\n    if (this.el) {\n      this.el.removeChild(this.el.querySelector(\"img\"));\n    }\n  }\n\n  preload(photos) {\n    if (this.timeout) {\n      window.clearTimeout(this.timeout);\n    }\n\n    this.timeout = setTimeout(() => {\n      photos.forEach((photo, index) => {\n        const image = new Image();\n        image.src = photo.sizes.large.url;\n        image.setAttribute(\"srcset\", photo.srcSet);\n        image.setAttribute(\"sizes\", sizes(photo));\n        const key = `snPreloadedPhoto${index}`;\n        window[key] = image;\n      });\n    }, 1000);\n  }\n\n  render() {\n    const { next, previous, photo } = this.props;\n    return (\n      <div class={photo.mode}>\n        <div class=\"photo-and-text\">\n          <div class=\"photo-wrapper\" ref={(el) => (this.el = el)}>\n            {previous}\n            {next}\n            <img alt={photo.title} srcSet={photo.srcSet} sizes={sizes(photo)} />\n          </div>\n          <PhotoText photo={photo} />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Photo;\n"]},"metadata":{},"sourceType":"module"}