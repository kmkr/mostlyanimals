{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { PureComponent } from \"react\";\nimport Link from \"next/link\";\nimport TransitionImage from \"../transition-image\";\nimport PhotoText from \"../photos/photo-text\"; // import decorateLink from \"../feature/decorate-link\";\n// todo: fix inkludering av search params pÃ¥ lenker\n\nclass Photo extends PureComponent {\n  constructor() {\n    super();\n    this.state = {\n      inViewport: false\n    };\n  }\n\n  componentDidMount() {\n    const options = {\n      root: null,\n      rootMargin: \"300px\"\n    };\n    const observer = new IntersectionObserver((entries, observer) => {\n      entries.forEach(entry => {\n        if (entry.isIntersecting) {\n          this.setState({\n            inViewport: true\n          });\n        }\n      });\n    }, options);\n    observer.observe(this.domElem);\n  }\n\n  render() {\n    const {\n      photo,\n      setWidth\n    } = this.props;\n    const {\n      inViewport\n    } = this.state;\n    const style = {\n      width: setWidth ? `${photo.displayedWidth}px` : \"100%\"\n    };\n    return /*#__PURE__*/_jsxs(\"div\", {\n      ref: domElem => this.domElem = domElem,\n      className: \"photo\",\n      \"data-photo-key\": photo.key,\n      style: style,\n      children: [/*#__PURE__*/_jsx(Link, {\n        href: `/photos/${photo.key}`,\n        children: /*#__PURE__*/_jsxs(\"a\", {\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"overlay-title-wrapper\",\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              className: \"title\",\n              children: photo.title\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: \"location\",\n              children: photo.location\n            })]\n          }), inViewport && /*#__PURE__*/_jsx(TransitionImage, {\n            alt: photo.title,\n            src: photo.sizes.xsmall.url,\n            srcSet: photo.srcSet,\n            sizes: \"(min-width: 1100px) 30vw, 100vw\"\n          })]\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"sn-dn-ns sn-mb-l\",\n        children: /*#__PURE__*/_jsx(PhotoText, {\n          photo: photo\n        })\n      })]\n    });\n  }\n\n}\n\nexport default Photo;","map":null,"metadata":{},"sourceType":"module"}