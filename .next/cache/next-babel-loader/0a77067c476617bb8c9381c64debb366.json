{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/km/git/splendid-nudibranch/client/src/collage/index.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { PureComponent } from \"react\";\nimport Photo from \"./photo\";\nimport setPhotoWidth from \"./set-width-helper\";\nimport throttle from \"./throttle\";\nimport getWidth from \"./get-width\";\nimport MidWater from \"./mid-water\";\n\nfunction hasScrollbar() {\n  return document.body.offsetHeight >= window.innerHeight;\n}\n\nfunction getIsCollage() {\n  return getWidth() >= 1100;\n}\n\nvar Collage = /*#__PURE__*/function (_Component) {\n  _inherits(Collage, _Component);\n\n  var _super = _createSuper(Collage);\n\n  function Collage(props) {\n    var _this;\n\n    _classCallCheck(this, Collage);\n\n    _this = _super.call(this);\n    _this.updateWidth = _this.updateWidth.bind(_assertThisInitialized(_this));\n    _this.renderPhotoGroup = _this.renderPhotoGroup.bind(_assertThisInitialized(_this));\n    _this.state = {\n      width: getWidth()\n    };\n    return _this;\n  }\n\n  _createClass(Collage, [{\n    key: \"updateWidth\",\n    value: function updateWidth() {\n      this.setState({\n        width: getWidth()\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      throttle(\"resize\", \"optimizedResize\");\n      window.addEventListener(\"optimizedResize\", this.updateWidth); // Force re-calculation of photo height/width if scrollbar is present\n\n      if (hasScrollbar()) {\n        this.updateWidth();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      window.removeEventListener(\"optimizedResize\", this.updateWidth);\n    }\n  }, {\n    key: \"renderPhotoGroup\",\n    value: function renderPhotoGroup(photoGroup) {\n      var _this2 = this;\n\n      var onSelectPhoto = this.props.onSelectPhoto;\n      var setDimensions = getIsCollage();\n      var style = setDimensions ? {\n        height: \"\".concat(photoGroup.height, \"px\")\n      } : {};\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        \"class\": \"photo-group\",\n        style: style,\n        children: photoGroup.photos.map(function (photo) {\n          return /*#__PURE__*/_jsxDEV(Photo, {\n            setWidth: setDimensions,\n            photo: photo,\n            onSelect: onSelectPhoto\n          }, photo.key, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 11\n          }, _this2);\n        })\n      }, \"photo-group-\".concat(photoGroup.key), false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 7\n      }, this);\n    }\n  }, {\n    key: \"render\",\n    value: function render(_ref) {\n      var featuredPhotos = _ref.featuredPhotos,\n          nonFeaturedPhotos = _ref.nonFeaturedPhotos;\n      var featuredPhotoGroups = setPhotoWidth(featuredPhotos);\n      var nonFeaturedPhotoGroups = setPhotoWidth(nonFeaturedPhotos);\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"collage\",\n        children: [featuredPhotoGroups.map(this.renderPhotoGroup), !!featuredPhotoGroups.length && /*#__PURE__*/_jsxDEV(MidWater, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 42\n        }, this), nonFeaturedPhotoGroups.map(this.renderPhotoGroup)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 7\n      }, this);\n    }\n  }]);\n\n  return Collage;\n}(Component);\n\nexport default Collage;","map":{"version":3,"sources":["/home/km/git/splendid-nudibranch/client/src/collage/index.js"],"names":["PureComponent","Photo","setPhotoWidth","throttle","getWidth","MidWater","hasScrollbar","document","body","offsetHeight","window","innerHeight","getIsCollage","Collage","props","updateWidth","bind","renderPhotoGroup","state","width","setState","addEventListener","removeEventListener","photoGroup","onSelectPhoto","setDimensions","style","height","photos","map","photo","key","featuredPhotos","nonFeaturedPhotos","featuredPhotoGroups","nonFeaturedPhotoGroups","length","Component"],"mappings":";;;;;;;;;;;;;AAAA,SAASA,aAAT,QAA8B,OAA9B;AAEA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,aAAP,MAA0B,oBAA1B;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,OAAOC,QAAP,MAAqB,aAArB;AACA,OAAOC,QAAP,MAAqB,aAArB;;AAEA,SAASC,YAAT,GAAwB;AACtB,SAAOC,QAAQ,CAACC,IAAT,CAAcC,YAAd,IAA8BC,MAAM,CAACC,WAA5C;AACD;;AAED,SAASC,YAAT,GAAwB;AACtB,SAAOR,QAAQ,MAAM,IAArB;AACD;;IAEKS,O;;;;;AACJ,mBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB;AAEA,UAAKC,WAAL,GAAmB,MAAKA,WAAL,CAAiBC,IAAjB,+BAAnB;AACA,UAAKC,gBAAL,GAAwB,MAAKA,gBAAL,CAAsBD,IAAtB,+BAAxB;AAEA,UAAKE,KAAL,GAAa;AACXC,MAAAA,KAAK,EAAEf,QAAQ;AADJ,KAAb;AANiB;AASlB;;;;kCAEa;AACZ,WAAKgB,QAAL,CAAc;AACZD,QAAAA,KAAK,EAAEf,QAAQ;AADH,OAAd;AAGD;;;wCAEmB;AAClBD,MAAAA,QAAQ,CAAC,QAAD,EAAW,iBAAX,CAAR;AACAO,MAAAA,MAAM,CAACW,gBAAP,CAAwB,iBAAxB,EAA2C,KAAKN,WAAhD,EAFkB,CAIlB;;AACA,UAAIT,YAAY,EAAhB,EAAoB;AAClB,aAAKS,WAAL;AACD;AACF;;;2CAEsB;AACrBL,MAAAA,MAAM,CAACY,mBAAP,CAA2B,iBAA3B,EAA8C,KAAKP,WAAnD;AACD;;;qCAEgBQ,U,EAAY;AAAA;;AAAA,UACnBC,aADmB,GACD,KAAKV,KADJ,CACnBU,aADmB;AAE3B,UAAMC,aAAa,GAAGb,YAAY,EAAlC;AACA,UAAMc,KAAK,GAAGD,aAAa,GAAG;AAAEE,QAAAA,MAAM,YAAKJ,UAAU,CAACI,MAAhB;AAAR,OAAH,GAA0C,EAArE;AACA,0BACE;AACE,iBAAM,aADR;AAGE,QAAA,KAAK,EAAED,KAHT;AAAA,kBAKGH,UAAU,CAACK,MAAX,CAAkBC,GAAlB,CAAsB,UAACC,KAAD;AAAA,8BACrB,QAAC,KAAD;AAEE,YAAA,QAAQ,EAAEL,aAFZ;AAGE,YAAA,KAAK,EAAEK,KAHT;AAIE,YAAA,QAAQ,EAAEN;AAJZ,aACOM,KAAK,CAACC,GADb;AAAA;AAAA;AAAA;AAAA,oBADqB;AAAA,SAAtB;AALH,+BAEsBR,UAAU,CAACQ,GAFjC;AAAA;AAAA;AAAA;AAAA,cADF;AAgBD;;;iCAE6C;AAAA,UAArCC,cAAqC,QAArCA,cAAqC;AAAA,UAArBC,iBAAqB,QAArBA,iBAAqB;AAC5C,UAAMC,mBAAmB,GAAGhC,aAAa,CAAC8B,cAAD,CAAzC;AACA,UAAMG,sBAAsB,GAAGjC,aAAa,CAAC+B,iBAAD,CAA5C;AACA,0BACE;AAAK,QAAA,EAAE,EAAC,SAAR;AAAA,mBACGC,mBAAmB,CAACL,GAApB,CAAwB,KAAKZ,gBAA7B,CADH,EAEG,CAAC,CAACiB,mBAAmB,CAACE,MAAtB,iBAAgC,QAAC,QAAD;AAAA;AAAA;AAAA;AAAA,gBAFnC,EAGGD,sBAAsB,CAACN,GAAvB,CAA2B,KAAKZ,gBAAhC,CAHH;AAAA;AAAA;AAAA;AAAA;AAAA,cADF;AAOD;;;;EAhEmBoB,S;;AAmEtB,eAAexB,OAAf","sourcesContent":["import { PureComponent } from \"react\";\n\nimport Photo from \"./photo\";\nimport setPhotoWidth from \"./set-width-helper\";\nimport throttle from \"./throttle\";\nimport getWidth from \"./get-width\";\nimport MidWater from \"./mid-water\";\n\nfunction hasScrollbar() {\n  return document.body.offsetHeight >= window.innerHeight;\n}\n\nfunction getIsCollage() {\n  return getWidth() >= 1100;\n}\n\nclass Collage extends Component {\n  constructor(props) {\n    super();\n\n    this.updateWidth = this.updateWidth.bind(this);\n    this.renderPhotoGroup = this.renderPhotoGroup.bind(this);\n\n    this.state = {\n      width: getWidth(),\n    };\n  }\n\n  updateWidth() {\n    this.setState({\n      width: getWidth(),\n    });\n  }\n\n  componentDidMount() {\n    throttle(\"resize\", \"optimizedResize\");\n    window.addEventListener(\"optimizedResize\", this.updateWidth);\n\n    // Force re-calculation of photo height/width if scrollbar is present\n    if (hasScrollbar()) {\n      this.updateWidth();\n    }\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"optimizedResize\", this.updateWidth);\n  }\n\n  renderPhotoGroup(photoGroup) {\n    const { onSelectPhoto } = this.props;\n    const setDimensions = getIsCollage();\n    const style = setDimensions ? { height: `${photoGroup.height}px` } : {};\n    return (\n      <div\n        class=\"photo-group\"\n        key={`photo-group-${photoGroup.key}`}\n        style={style}\n      >\n        {photoGroup.photos.map((photo) => (\n          <Photo\n            key={photo.key}\n            setWidth={setDimensions}\n            photo={photo}\n            onSelect={onSelectPhoto}\n          />\n        ))}\n      </div>\n    );\n  }\n\n  render({ featuredPhotos, nonFeaturedPhotos }) {\n    const featuredPhotoGroups = setPhotoWidth(featuredPhotos);\n    const nonFeaturedPhotoGroups = setPhotoWidth(nonFeaturedPhotos);\n    return (\n      <div id=\"collage\">\n        {featuredPhotoGroups.map(this.renderPhotoGroup)}\n        {!!featuredPhotoGroups.length && <MidWater />}\n        {nonFeaturedPhotoGroups.map(this.renderPhotoGroup)}\n      </div>\n    );\n  }\n}\n\nexport default Collage;\n"]},"metadata":{},"sourceType":"module"}