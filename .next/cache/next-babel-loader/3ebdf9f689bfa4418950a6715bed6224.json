{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/km/git/splendid-nudibranch/client/collage/photo.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { PureComponent } from \"react\";\nimport Link from \"next/link\";\nimport TransitionImage from \"../transition-image\";\nimport PhotoText from \"../photos/photo-text\"; // import decorateLink from \"../feature/decorate-link\";\n// todo: fix inkludering av search params på lenker\n\nvar Photo = /*#__PURE__*/function (_PureComponent) {\n  _inherits(Photo, _PureComponent);\n\n  var _super = _createSuper(Photo);\n\n  function Photo() {\n    var _this;\n\n    _classCallCheck(this, Photo);\n\n    _this = _super.call(this);\n    _this.state = {\n      inViewport: false\n    };\n    return _this;\n  }\n\n  _createClass(Photo, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var options = {\n        root: null,\n        rootMargin: \"300px\"\n      };\n      var observer = new IntersectionObserver(function (entries, observer) {\n        entries.forEach(function (entry) {\n          if (entry.isIntersecting) {\n            _this2.setState({\n              inViewport: true\n            });\n          }\n        });\n      }, options);\n      observer.observe(this.domElem);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props = this.props,\n          photo = _this$props.photo,\n          setWidth = _this$props.setWidth;\n      var inViewport = this.state.inViewport;\n      var style = {\n        width: setWidth ? \"\".concat(photo.displayedWidth, \"px\") : \"100%\"\n      };\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: function ref(domElem) {\n          return _this3.domElem = domElem;\n        },\n        className: \"photo\",\n        \"data-photo-key\": photo.key,\n        style: style,\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          href: \"/photos/\".concat(photo.key),\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"overlay-title-wrapper\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"title\",\n                children: photo.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 52,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"location\",\n                children: photo.location\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 53,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 51,\n              columnNumber: 13\n            }, this), inViewport && /*#__PURE__*/_jsxDEV(TransitionImage, {\n              alt: photo.title,\n              src: photo.sizes.xsmall.url,\n              srcSet: photo.srcSet,\n              sizes: \"(min-width: 1100px) 30vw, 100vw\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 56,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sn-dn-ns sn-mb-l\",\n          children: /*#__PURE__*/_jsxDEV(PhotoText, {\n            photo: photo\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 7\n      }, this);\n    }\n  }]);\n\n  return Photo;\n}(PureComponent);\n\nexport default Photo;","map":{"version":3,"sources":["/home/km/git/splendid-nudibranch/client/collage/photo.js"],"names":["PureComponent","Link","TransitionImage","PhotoText","Photo","state","inViewport","options","root","rootMargin","observer","IntersectionObserver","entries","forEach","entry","isIntersecting","setState","observe","domElem","props","photo","setWidth","style","width","displayedWidth","key","title","location","sizes","xsmall","url","srcSet"],"mappings":";;;;;;;;;;;;AAAA,SAASA,aAAT,QAA8B,OAA9B;AACA,OAAOC,IAAP,MAAiB,WAAjB;AAEA,OAAOC,eAAP,MAA4B,qBAA5B;AACA,OAAOC,SAAP,MAAsB,sBAAtB,C,CACA;AACA;;IAEMC,K;;;;;AACJ,mBAAc;AAAA;;AAAA;;AACZ;AACA,UAAKC,KAAL,GAAa;AACXC,MAAAA,UAAU,EAAE;AADD,KAAb;AAFY;AAKb;;;;wCAEmB;AAAA;;AAClB,UAAMC,OAAO,GAAG;AACdC,QAAAA,IAAI,EAAE,IADQ;AAEdC,QAAAA,UAAU,EAAE;AAFE,OAAhB;AAKA,UAAMC,QAAQ,GAAG,IAAIC,oBAAJ,CAAyB,UAACC,OAAD,EAAUF,QAAV,EAAuB;AAC/DE,QAAAA,OAAO,CAACC,OAAR,CAAgB,UAACC,KAAD,EAAW;AACzB,cAAIA,KAAK,CAACC,cAAV,EAA0B;AACxB,YAAA,MAAI,CAACC,QAAL,CAAc;AACZV,cAAAA,UAAU,EAAE;AADA,aAAd;AAGD;AACF,SAND;AAOD,OARgB,EAQdC,OARc,CAAjB;AASAG,MAAAA,QAAQ,CAACO,OAAT,CAAiB,KAAKC,OAAtB;AACD;;;6BAEQ;AAAA;;AAAA,wBACqB,KAAKC,KAD1B;AAAA,UACCC,KADD,eACCA,KADD;AAAA,UACQC,QADR,eACQA,QADR;AAAA,UAECf,UAFD,GAEgB,KAAKD,KAFrB,CAECC,UAFD;AAGP,UAAMgB,KAAK,GAAG;AACZC,QAAAA,KAAK,EAAEF,QAAQ,aAAMD,KAAK,CAACI,cAAZ,UAAiC;AADpC,OAAd;AAIA,0BACE;AACE,QAAA,GAAG,EAAE,aAACN,OAAD;AAAA,iBAAc,MAAI,CAACA,OAAL,GAAeA,OAA7B;AAAA,SADP;AAEE,QAAA,SAAS,EAAC,OAFZ;AAGE,0BAAgBE,KAAK,CAACK,GAHxB;AAIE,QAAA,KAAK,EAAEH,KAJT;AAAA,gCAME,QAAC,IAAD;AAAM,UAAA,IAAI,oBAAaF,KAAK,CAACK,GAAnB,CAAV;AAAA,iCACE;AAAA,oCACE;AAAK,cAAA,SAAS,EAAC,uBAAf;AAAA,sCACE;AAAG,gBAAA,SAAS,EAAC,OAAb;AAAA,0BAAsBL,KAAK,CAACM;AAA5B;AAAA;AAAA;AAAA;AAAA,sBADF,eAEE;AAAG,gBAAA,SAAS,EAAC,UAAb;AAAA,0BAAyBN,KAAK,CAACO;AAA/B;AAAA;AAAA;AAAA;AAAA,sBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,EAKGrB,UAAU,iBACT,QAAC,eAAD;AACE,cAAA,GAAG,EAAEc,KAAK,CAACM,KADb;AAEE,cAAA,GAAG,EAAEN,KAAK,CAACQ,KAAN,CAAYC,MAAZ,CAAmBC,GAF1B;AAGE,cAAA,MAAM,EAAEV,KAAK,CAACW,MAHhB;AAIE,cAAA,KAAK,EAAC;AAJR;AAAA;AAAA;AAAA;AAAA,oBANJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBANF,eAuBE;AAAK,UAAA,SAAS,EAAC,kBAAf;AAAA,iCACE,QAAC,SAAD;AAAW,YAAA,KAAK,EAAEX;AAAlB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAvBF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF;AA6BD;;;;EA9DiBpB,a;;AAiEpB,eAAeI,KAAf","sourcesContent":["import { PureComponent } from \"react\";\nimport Link from \"next/link\";\n\nimport TransitionImage from \"../transition-image\";\nimport PhotoText from \"../photos/photo-text\";\n// import decorateLink from \"../feature/decorate-link\";\n// todo: fix inkludering av search params på lenker\n\nclass Photo extends PureComponent {\n  constructor() {\n    super();\n    this.state = {\n      inViewport: false,\n    };\n  }\n\n  componentDidMount() {\n    const options = {\n      root: null,\n      rootMargin: \"300px\",\n    };\n\n    const observer = new IntersectionObserver((entries, observer) => {\n      entries.forEach((entry) => {\n        if (entry.isIntersecting) {\n          this.setState({\n            inViewport: true,\n          });\n        }\n      });\n    }, options);\n    observer.observe(this.domElem);\n  }\n\n  render() {\n    const { photo, setWidth } = this.props;\n    const { inViewport } = this.state;\n    const style = {\n      width: setWidth ? `${photo.displayedWidth}px` : \"100%\",\n    };\n\n    return (\n      <div\n        ref={(domElem) => (this.domElem = domElem)}\n        className=\"photo\"\n        data-photo-key={photo.key}\n        style={style}\n      >\n        <Link href={`/photos/${photo.key}`}>\n          <a>\n            <div className=\"overlay-title-wrapper\">\n              <p className=\"title\">{photo.title}</p>\n              <p className=\"location\">{photo.location}</p>\n            </div>\n            {inViewport && (\n              <TransitionImage\n                alt={photo.title}\n                src={photo.sizes.xsmall.url}\n                srcSet={photo.srcSet}\n                sizes=\"(min-width: 1100px) 30vw, 100vw\"\n              />\n            )}\n          </a>\n        </Link>\n\n        <div className=\"sn-dn-ns sn-mb-l\">\n          <PhotoText photo={photo} />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Photo;\n"]},"metadata":{},"sourceType":"module"}