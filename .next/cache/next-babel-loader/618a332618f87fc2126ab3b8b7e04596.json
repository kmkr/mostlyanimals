{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/km/git/splendid-nudibranch/client/src/collage/photo.js\";\nimport { PureComponent } from \"react\";\nimport Link from \"next/link\";\nimport TransitionImage from \"../transition-image\";\nimport PhotoText from \"../photos/photo-text\"; // import decorateLink from \"../feature/decorate-link\";\n// todo: fix inkludering av search params på lenker\n\nclass Photo extends PureComponent {\n  constructor() {\n    super();\n    this.state = {\n      inViewport: false\n    };\n  }\n\n  componentDidMount() {\n    const options = {\n      root: null,\n      rootMargin: \"300px\"\n    };\n    const observer = new IntersectionObserver((entries, observer) => {\n      entries.forEach(entry => {\n        if (entry.isIntersecting) {\n          this.setState({\n            inViewport: true\n          });\n        }\n      });\n    }, options);\n    observer.observe(this.domElem);\n  }\n\n  render() {\n    const {\n      photo,\n      setWidth\n    } = this.props;\n    const {\n      inViewport\n    } = this.state;\n    const style = {\n      width: setWidth ? `${photo.displayedWidth}px` : \"100%\"\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: domElem => this.domElem = domElem,\n      className: \"photo\",\n      \"data-photo-key\": photo.key,\n      style: style,\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        href: `/photos/${photo.key}`,\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"overlay-title-wrapper\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"title\",\n              children: photo.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 52,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"location\",\n              children: photo.location\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 53,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 13\n          }, this), inViewport && /*#__PURE__*/_jsxDEV(TransitionImage, {\n            alt: photo.title,\n            src: photo.sizes.xsmall.url,\n            srcSet: photo.srcSet,\n            sizes: \"(min-width: 1100px) 30vw, 100vw\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sn-dn-ns sn-mb-l\",\n        children: /*#__PURE__*/_jsxDEV(PhotoText, {\n          photo: photo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Photo;","map":{"version":3,"sources":["/home/km/git/splendid-nudibranch/client/src/collage/photo.js"],"names":["PureComponent","Link","TransitionImage","PhotoText","Photo","constructor","state","inViewport","componentDidMount","options","root","rootMargin","observer","IntersectionObserver","entries","forEach","entry","isIntersecting","setState","observe","domElem","render","photo","setWidth","props","style","width","displayedWidth","key","title","location","sizes","xsmall","url","srcSet"],"mappings":";;AAAA,SAASA,aAAT,QAA8B,OAA9B;AACA,OAAOC,IAAP,MAAiB,WAAjB;AAEA,OAAOC,eAAP,MAA4B,qBAA5B;AACA,OAAOC,SAAP,MAAsB,sBAAtB,C,CACA;AACA;;AAEA,MAAMC,KAAN,SAAoBJ,aAApB,CAAkC;AAChCK,EAAAA,WAAW,GAAG;AACZ;AACA,SAAKC,KAAL,GAAa;AACXC,MAAAA,UAAU,EAAE;AADD,KAAb;AAGD;;AAEDC,EAAAA,iBAAiB,GAAG;AAClB,UAAMC,OAAO,GAAG;AACdC,MAAAA,IAAI,EAAE,IADQ;AAEdC,MAAAA,UAAU,EAAE;AAFE,KAAhB;AAKA,UAAMC,QAAQ,GAAG,IAAIC,oBAAJ,CAAyB,CAACC,OAAD,EAAUF,QAAV,KAAuB;AAC/DE,MAAAA,OAAO,CAACC,OAAR,CAAiBC,KAAD,IAAW;AACzB,YAAIA,KAAK,CAACC,cAAV,EAA0B;AACxB,eAAKC,QAAL,CAAc;AACZX,YAAAA,UAAU,EAAE;AADA,WAAd;AAGD;AACF,OAND;AAOD,KARgB,EAQdE,OARc,CAAjB;AASAG,IAAAA,QAAQ,CAACO,OAAT,CAAiB,KAAKC,OAAtB;AACD;;AAEDC,EAAAA,MAAM,GAAG;AACP,UAAM;AAAEC,MAAAA,KAAF;AAASC,MAAAA;AAAT,QAAsB,KAAKC,KAAjC;AACA,UAAM;AAAEjB,MAAAA;AAAF,QAAiB,KAAKD,KAA5B;AACA,UAAMmB,KAAK,GAAG;AACZC,MAAAA,KAAK,EAAEH,QAAQ,GAAI,GAAED,KAAK,CAACK,cAAe,IAA3B,GAAiC;AADpC,KAAd;AAIA,wBACE;AACE,MAAA,GAAG,EAAGP,OAAD,IAAc,KAAKA,OAAL,GAAeA,OADpC;AAEE,MAAA,SAAS,EAAC,OAFZ;AAGE,wBAAgBE,KAAK,CAACM,GAHxB;AAIE,MAAA,KAAK,EAAEH,KAJT;AAAA,8BAME,QAAC,IAAD;AAAM,QAAA,IAAI,EAAG,WAAUH,KAAK,CAACM,GAAI,EAAjC;AAAA,+BACE;AAAA,kCACE;AAAK,YAAA,SAAS,EAAC,uBAAf;AAAA,oCACE;AAAG,cAAA,SAAS,EAAC,OAAb;AAAA,wBAAsBN,KAAK,CAACO;AAA5B;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE;AAAG,cAAA,SAAS,EAAC,UAAb;AAAA,wBAAyBP,KAAK,CAACQ;AAA/B;AAAA;AAAA;AAAA;AAAA,oBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,EAKGvB,UAAU,iBACT,QAAC,eAAD;AACE,YAAA,GAAG,EAAEe,KAAK,CAACO,KADb;AAEE,YAAA,GAAG,EAAEP,KAAK,CAACS,KAAN,CAAYC,MAAZ,CAAmBC,GAF1B;AAGE,YAAA,MAAM,EAAEX,KAAK,CAACY,MAHhB;AAIE,YAAA,KAAK,EAAC;AAJR;AAAA;AAAA;AAAA;AAAA,kBANJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cANF,eAuBE;AAAK,QAAA,SAAS,EAAC,kBAAf;AAAA,+BACE,QAAC,SAAD;AAAW,UAAA,KAAK,EAAEZ;AAAlB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAvBF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AA6BD;;AA9D+B;;AAiElC,eAAelB,KAAf","sourcesContent":["import { PureComponent } from \"react\";\nimport Link from \"next/link\";\n\nimport TransitionImage from \"../transition-image\";\nimport PhotoText from \"../photos/photo-text\";\n// import decorateLink from \"../feature/decorate-link\";\n// todo: fix inkludering av search params på lenker\n\nclass Photo extends PureComponent {\n  constructor() {\n    super();\n    this.state = {\n      inViewport: false,\n    };\n  }\n\n  componentDidMount() {\n    const options = {\n      root: null,\n      rootMargin: \"300px\",\n    };\n\n    const observer = new IntersectionObserver((entries, observer) => {\n      entries.forEach((entry) => {\n        if (entry.isIntersecting) {\n          this.setState({\n            inViewport: true,\n          });\n        }\n      });\n    }, options);\n    observer.observe(this.domElem);\n  }\n\n  render() {\n    const { photo, setWidth } = this.props;\n    const { inViewport } = this.state;\n    const style = {\n      width: setWidth ? `${photo.displayedWidth}px` : \"100%\",\n    };\n\n    return (\n      <div\n        ref={(domElem) => (this.domElem = domElem)}\n        className=\"photo\"\n        data-photo-key={photo.key}\n        style={style}\n      >\n        <Link href={`/photos/${photo.key}`}>\n          <a>\n            <div className=\"overlay-title-wrapper\">\n              <p className=\"title\">{photo.title}</p>\n              <p className=\"location\">{photo.location}</p>\n            </div>\n            {inViewport && (\n              <TransitionImage\n                alt={photo.title}\n                src={photo.sizes.xsmall.url}\n                srcSet={photo.srcSet}\n                sizes=\"(min-width: 1100px) 30vw, 100vw\"\n              />\n            )}\n          </a>\n        </Link>\n\n        <div className=\"sn-dn-ns sn-mb-l\">\n          <PhotoText photo={photo} />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Photo;\n"]},"metadata":{},"sourceType":"module"}