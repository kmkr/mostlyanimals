{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/km/git/splendid-nudibranch/client/src/collage/index.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { PureComponent } from \"react\";\nimport Photo from \"./photo\";\nimport setPhotoWidth from \"./set-width-helper\";\nimport throttle from \"./throttle\";\nimport getWidth from \"./get-width\";\nimport MidWater from \"./mid-water\";\n\nfunction hasScrollbar() {\n  return document.body.offsetHeight >= window.innerHeight;\n}\n\nvar Collage = /*#__PURE__*/function (_PureComponent) {\n  _inherits(Collage, _PureComponent);\n\n  var _super = _createSuper(Collage);\n\n  function Collage(props) {\n    var _this;\n\n    _classCallCheck(this, Collage);\n\n    _this = _super.call(this);\n    _this.updateWidth = _this.updateWidth.bind(_assertThisInitialized(_this));\n    _this.renderPhotoGroup = _this.renderPhotoGroup.bind(_assertThisInitialized(_this));\n    _this.state = {}; // this.state = {\n    //   width: getWidth(),\n    // };\n\n    return _this;\n  }\n\n  _createClass(Collage, [{\n    key: \"getIsCollage\",\n    value: function getIsCollage() {\n      if (this.state.width) {\n        return getWidth() > 1100;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"updateWidth\",\n    value: function updateWidth() {\n      this.setState({\n        width: getWidth()\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      throttle(\"resize\", \"optimizedResize\");\n      window.addEventListener(\"optimizedResize\", this.updateWidth); // Force re-calculation of photo height/width if scrollbar is present\n      // if (hasScrollbar()) {\n\n      this.updateWidth(); // }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      window.removeEventListener(\"optimizedResize\", this.updateWidth);\n    }\n  }, {\n    key: \"renderPhotoGroup\",\n    value: function renderPhotoGroup(photoGroup) {\n      var _this2 = this;\n\n      var onSelectPhoto = this.props.onSelectPhoto; // const setDimensions = getIsCollage(); todo\n\n      var setDimensions = true;\n      var style = setDimensions ? {\n        height: \"\".concat(photoGroup.height, \"px\")\n      } : {};\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        \"class\": \"photo-group\",\n        style: style,\n        children: photoGroup.photos.map(function (photo) {\n          return /*#__PURE__*/_jsxDEV(Photo, {\n            setWidth: setDimensions,\n            photo: photo,\n            onSelect: onSelectPhoto\n          }, photo.key, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 11\n          }, _this2);\n        })\n      }, \"photo-group-\".concat(photoGroup.key), false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 7\n      }, this);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          featuredPhotos = _this$props.featuredPhotos,\n          nonFeaturedPhotos = _this$props.nonFeaturedPhotos;\n      var width = this.state.width;\n\n      if (width) {\n        var featuredPhotoGroups = setPhotoWidth(featuredPhotos);\n        var nonFeaturedPhotoGroups = setPhotoWidth(nonFeaturedPhotos);\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"collage\",\n          children: [featuredPhotoGroups.map(this.renderPhotoGroup), !!featuredPhotoGroups.length && /*#__PURE__*/_jsxDEV(MidWater, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 44\n          }, this), nonFeaturedPhotoGroups.map(this.renderPhotoGroup)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 9\n        }, this);\n      }\n\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"collage\",\n        children: this.renderPhotoGroup({\n          key: \"all\",\n          photos: photos\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 7\n      }, this);\n    }\n  }]);\n\n  return Collage;\n}(PureComponent);\n\nexport default Collage;","map":{"version":3,"sources":["/home/km/git/splendid-nudibranch/client/src/collage/index.js"],"names":["PureComponent","Photo","setPhotoWidth","throttle","getWidth","MidWater","hasScrollbar","document","body","offsetHeight","window","innerHeight","Collage","props","updateWidth","bind","renderPhotoGroup","state","width","setState","addEventListener","removeEventListener","photoGroup","onSelectPhoto","setDimensions","style","height","photos","map","photo","key","featuredPhotos","nonFeaturedPhotos","featuredPhotoGroups","nonFeaturedPhotoGroups","length"],"mappings":"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","sourcesContent":["import { PureComponent } from \"react\";\n\nimport Photo from \"./photo\";\nimport setPhotoWidth from \"./set-width-helper\";\nimport throttle from \"./throttle\";\nimport getWidth from \"./get-width\";\nimport MidWater from \"./mid-water\";\n\nfunction hasScrollbar() {\n  return document.body.offsetHeight >= window.innerHeight;\n}\n\nclass Collage extends PureComponent {\n  constructor(props) {\n    super();\n\n    this.updateWidth = this.updateWidth.bind(this);\n    this.renderPhotoGroup = this.renderPhotoGroup.bind(this);\n\n    this.state = {};\n\n    // this.state = {\n    //   width: getWidth(),\n    // };\n  }\n\n  getIsCollage() {\n    if (this.state.width) {\n      return getWidth() > 1100;\n    }\n    return false;\n  }\n\n  updateWidth() {\n    this.setState({\n      width: getWidth(),\n    });\n  }\n\n  componentDidMount() {\n    throttle(\"resize\", \"optimizedResize\");\n    window.addEventListener(\"optimizedResize\", this.updateWidth);\n\n    // Force re-calculation of photo height/width if scrollbar is present\n    // if (hasScrollbar()) {\n    this.updateWidth();\n    // }\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"optimizedResize\", this.updateWidth);\n  }\n\n  renderPhotoGroup(photoGroup) {\n    const { onSelectPhoto } = this.props;\n    // const setDimensions = getIsCollage(); todo\n    const setDimensions = true;\n    const style = setDimensions ? { height: `${photoGroup.height}px` } : {};\n    return (\n      <div\n        class=\"photo-group\"\n        key={`photo-group-${photoGroup.key}`}\n        style={style}\n      >\n        {photoGroup.photos.map((photo) => (\n          <Photo\n            key={photo.key}\n            setWidth={setDimensions}\n            photo={photo}\n            onSelect={onSelectPhoto}\n          />\n        ))}\n      </div>\n    );\n  }\n\n  render() {\n    const { featuredPhotos, nonFeaturedPhotos } = this.props;\n\n    const { width } = this.state;\n\n    if (width) {\n      const featuredPhotoGroups = setPhotoWidth(featuredPhotos);\n      const nonFeaturedPhotoGroups = setPhotoWidth(nonFeaturedPhotos);\n      return (\n        <div id=\"collage\">\n          {featuredPhotoGroups.map(this.renderPhotoGroup)}\n          {!!featuredPhotoGroups.length && <MidWater />}\n          {nonFeaturedPhotoGroups.map(this.renderPhotoGroup)}\n        </div>\n      );\n    }\n\n    return (\n      <div id=\"collage\">\n        {this.renderPhotoGroup({\n          key: \"all\",\n          photos,\n        })}\n      </div>\n    );\n  }\n}\n\nexport default Collage;\n"]},"metadata":{},"sourceType":"module"}