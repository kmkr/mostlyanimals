{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/km/git/splendid-nudibranch/client/src/collage/photo.js\";\nimport { PureComponent } from \"react\";\nimport TransitionImage from \"../transition-image\";\nimport PhotoText from \"../photos/photo-text\";\nimport decorateLink from \"../feature/decorate-link\";\n\nclass Photo extends PureComponent {\n  constructor() {\n    super();\n    this.onClick = this.onClick.bind(this);\n    this.state = {\n      inViewport: false\n    };\n  }\n\n  componentDidMount() {\n    const options = {\n      root: null,\n      rootMargin: \"300px\"\n    };\n    const observer = new IntersectionObserver((entries, observer) => {\n      entries.forEach(entry => {\n        if (entry.isIntersecting) {\n          this.setState({\n            inViewport: true\n          });\n        }\n      });\n    }, options);\n    observer.observe(this.domElem);\n  }\n\n  onClick(e) {\n    e.preventDefault();\n    this.props.onSelect(this.props.photo);\n  }\n\n  render() {\n    const {\n      photo,\n      setWidth\n    } = this.props;\n    const {\n      inViewport\n    } = this.state;\n    const style = {\n      width: setWidth ? `${photo.displayedWidth}px` : \"100%\"\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: domElem => this.domElem = domElem,\n      class: \"photo\",\n      \"data-photo-key\": photo.key,\n      style: style,\n      children: [/*#__PURE__*/_jsxDEV(\"a\", {\n        href: decorateLink(`/photos/${photo.key}`),\n        onClick: this.onClick,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"overlay-title-wrapper\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            class: \"title\",\n            children: photo.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            class: \"location\",\n            children: photo.location\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }, this), inViewport && /*#__PURE__*/_jsxDEV(TransitionImage, {\n          alt: photo.title,\n          src: photo.sizes.xsmall.url,\n          srcSet: photo.srcSet,\n          sizes: \"(min-width: 1100px) 30vw, 100vw\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sn-dn-ns sn-mb-l\",\n        children: /*#__PURE__*/_jsxDEV(PhotoText, {\n          photo: photo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Photo;","map":{"version":3,"sources":["/home/km/git/splendid-nudibranch/client/src/collage/photo.js"],"names":["PureComponent","TransitionImage","PhotoText","decorateLink","Photo","constructor","onClick","bind","state","inViewport","componentDidMount","options","root","rootMargin","observer","IntersectionObserver","entries","forEach","entry","isIntersecting","setState","observe","domElem","e","preventDefault","props","onSelect","photo","render","setWidth","style","width","displayedWidth","key","title","location","sizes","xsmall","url","srcSet"],"mappings":"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","sourcesContent":["import { PureComponent } from \"react\";\n\nimport TransitionImage from \"../transition-image\";\nimport PhotoText from \"../photos/photo-text\";\nimport decorateLink from \"../feature/decorate-link\";\n\nclass Photo extends PureComponent {\n  constructor() {\n    super();\n    this.onClick = this.onClick.bind(this);\n    this.state = {\n      inViewport: false,\n    };\n  }\n\n  componentDidMount() {\n    const options = {\n      root: null,\n      rootMargin: \"300px\",\n    };\n\n    const observer = new IntersectionObserver((entries, observer) => {\n      entries.forEach((entry) => {\n        if (entry.isIntersecting) {\n          this.setState({\n            inViewport: true,\n          });\n        }\n      });\n    }, options);\n    observer.observe(this.domElem);\n  }\n\n  onClick(e) {\n    e.preventDefault();\n    this.props.onSelect(this.props.photo);\n  }\n\n  render() {\n    const { photo, setWidth } = this.props;\n    const { inViewport } = this.state;\n    const style = {\n      width: setWidth ? `${photo.displayedWidth}px` : \"100%\",\n    };\n\n    return (\n      <div\n        ref={(domElem) => (this.domElem = domElem)}\n        class=\"photo\"\n        data-photo-key={photo.key}\n        style={style}\n      >\n        <a href={decorateLink(`/photos/${photo.key}`)} onClick={this.onClick}>\n          <div class=\"overlay-title-wrapper\">\n            <p class=\"title\">{photo.title}</p>\n            <p class=\"location\">{photo.location}</p>\n          </div>\n          {inViewport && (\n            <TransitionImage\n              alt={photo.title}\n              src={photo.sizes.xsmall.url}\n              srcSet={photo.srcSet}\n              sizes=\"(min-width: 1100px) 30vw, 100vw\"\n            />\n          )}\n        </a>\n\n        <div className=\"sn-dn-ns sn-mb-l\">\n          <PhotoText photo={photo} />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Photo;\n"]},"metadata":{},"sourceType":"module"}