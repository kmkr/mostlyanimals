{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/km/git/splendid-nudibranch/client/src/collage/index.js\";\nimport { PureComponent } from \"react\";\nimport Photo from \"./photo\";\nimport setPhotoWidth from \"./set-width-helper\";\nimport throttle from \"./throttle\";\nimport getWidth from \"./get-width\";\nimport MidWater from \"./mid-water\";\n\nfunction hasScrollbar() {\n  return document.body.offsetHeight >= window.innerHeight;\n} // function getIsCollage() {\n//   return getWidth() >= 1100;\n// }\n\n\nclass Collage extends PureComponent {\n  constructor(props) {\n    super();\n    this.updateWidth = this.updateWidth.bind(this);\n    this.renderPhotoGroup = this.renderPhotoGroup.bind(this); // this.state = {\n    //   width: getWidth(),\n    // };\n  }\n\n  updateWidth() {\n    this.setState({\n      width: getWidth()\n    });\n  }\n\n  componentDidMount() {\n    throttle(\"resize\", \"optimizedResize\");\n    window.addEventListener(\"optimizedResize\", this.updateWidth); // Force re-calculation of photo height/width if scrollbar is present\n\n    if (hasScrollbar()) {\n      this.updateWidth();\n    }\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"optimizedResize\", this.updateWidth);\n  }\n\n  renderPhotoGroup(photoGroup) {\n    const {\n      onSelectPhoto\n    } = this.props; // const setDimensions = getIsCollage(); todo\n\n    const setDimensions = true;\n    const style = setDimensions ? {\n      height: `${photoGroup.height}px`\n    } : {};\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"photo-group\",\n      style: style,\n      children: photoGroup.photos.map(photo => /*#__PURE__*/_jsxDEV(Photo, {\n        setWidth: setDimensions,\n        photo: photo,\n        onSelect: onSelectPhoto\n      }, photo.key, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 11\n      }, this))\n    }, `photo-group-${photoGroup.key}`, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this);\n  }\n\n  render() {\n    const {\n      featuredPhotos,\n      nonFeaturedPhotos\n    } = this.props;\n    const featuredPhotoGroups = this.state.width ? setPhotoWidth(featuredPhotos) : featuredPhotos;\n    const nonFeaturedPhotoGroups = this.state.width ? setPhotoWidth(nonFeaturedPhotos) : nonFeaturedPhotos;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"collage\",\n      children: [featuredPhotoGroups.map(this.renderPhotoGroup), !!featuredPhotoGroups.length && /*#__PURE__*/_jsxDEV(MidWater, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 42\n      }, this), nonFeaturedPhotoGroups.map(this.renderPhotoGroup)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Collage;","map":{"version":3,"sources":["/home/km/git/splendid-nudibranch/client/src/collage/index.js"],"names":["PureComponent","Photo","setPhotoWidth","throttle","getWidth","MidWater","hasScrollbar","document","body","offsetHeight","window","innerHeight","Collage","constructor","props","updateWidth","bind","renderPhotoGroup","setState","width","componentDidMount","addEventListener","componentWillUnmount","removeEventListener","photoGroup","onSelectPhoto","setDimensions","style","height","photos","map","photo","key","render","featuredPhotos","nonFeaturedPhotos","featuredPhotoGroups","state","nonFeaturedPhotoGroups","length"],"mappings":";;AAAA,SAASA,aAAT,QAA8B,OAA9B;AAEA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,aAAP,MAA0B,oBAA1B;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,OAAOC,QAAP,MAAqB,aAArB;AACA,OAAOC,QAAP,MAAqB,aAArB;;AAEA,SAASC,YAAT,GAAwB;AACtB,SAAOC,QAAQ,CAACC,IAAT,CAAcC,YAAd,IAA8BC,MAAM,CAACC,WAA5C;AACD,C,CAED;AACA;AACA;;;AAEA,MAAMC,OAAN,SAAsBZ,aAAtB,CAAoC;AAClCa,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB;AAEA,SAAKC,WAAL,GAAmB,KAAKA,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAKC,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBD,IAAtB,CAA2B,IAA3B,CAAxB,CAJiB,CAMjB;AACA;AACA;AACD;;AAEDD,EAAAA,WAAW,GAAG;AACZ,SAAKG,QAAL,CAAc;AACZC,MAAAA,KAAK,EAAEf,QAAQ;AADH,KAAd;AAGD;;AAEDgB,EAAAA,iBAAiB,GAAG;AAClBjB,IAAAA,QAAQ,CAAC,QAAD,EAAW,iBAAX,CAAR;AACAO,IAAAA,MAAM,CAACW,gBAAP,CAAwB,iBAAxB,EAA2C,KAAKN,WAAhD,EAFkB,CAIlB;;AACA,QAAIT,YAAY,EAAhB,EAAoB;AAClB,WAAKS,WAAL;AACD;AACF;;AAEDO,EAAAA,oBAAoB,GAAG;AACrBZ,IAAAA,MAAM,CAACa,mBAAP,CAA2B,iBAA3B,EAA8C,KAAKR,WAAnD;AACD;;AAEDE,EAAAA,gBAAgB,CAACO,UAAD,EAAa;AAC3B,UAAM;AAAEC,MAAAA;AAAF,QAAoB,KAAKX,KAA/B,CAD2B,CAE3B;;AACA,UAAMY,aAAa,GAAG,IAAtB;AACA,UAAMC,KAAK,GAAGD,aAAa,GAAG;AAAEE,MAAAA,MAAM,EAAG,GAAEJ,UAAU,CAACI,MAAO;AAA/B,KAAH,GAA0C,EAArE;AACA,wBACE;AACE,MAAA,KAAK,EAAC,aADR;AAGE,MAAA,KAAK,EAAED,KAHT;AAAA,gBAKGH,UAAU,CAACK,MAAX,CAAkBC,GAAlB,CAAuBC,KAAD,iBACrB,QAAC,KAAD;AAEE,QAAA,QAAQ,EAAEL,aAFZ;AAGE,QAAA,KAAK,EAAEK,KAHT;AAIE,QAAA,QAAQ,EAAEN;AAJZ,SACOM,KAAK,CAACC,GADb;AAAA;AAAA;AAAA;AAAA,cADD;AALH,OAEQ,eAAcR,UAAU,CAACQ,GAAI,EAFrC;AAAA;AAAA;AAAA;AAAA,YADF;AAgBD;;AAEDC,EAAAA,MAAM,GAAG;AACP,UAAM;AAAEC,MAAAA,cAAF;AAAkBC,MAAAA;AAAlB,QAAwC,KAAKrB,KAAnD;AACA,UAAMsB,mBAAmB,GAAG,KAAKC,KAAL,CAAWlB,KAAX,GACxBjB,aAAa,CAACgC,cAAD,CADW,GAExBA,cAFJ;AAGA,UAAMI,sBAAsB,GAAG,KAAKD,KAAL,CAAWlB,KAAX,GAC3BjB,aAAa,CAACiC,iBAAD,CADc,GAE3BA,iBAFJ;AAGA,wBACE;AAAK,MAAA,EAAE,EAAC,SAAR;AAAA,iBACGC,mBAAmB,CAACN,GAApB,CAAwB,KAAKb,gBAA7B,CADH,EAEG,CAAC,CAACmB,mBAAmB,CAACG,MAAtB,iBAAgC,QAAC,QAAD;AAAA;AAAA;AAAA;AAAA,cAFnC,EAGGD,sBAAsB,CAACR,GAAvB,CAA2B,KAAKb,gBAAhC,CAHH;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAOD;;AAtEiC;;AAyEpC,eAAeL,OAAf","sourcesContent":["import { PureComponent } from \"react\";\n\nimport Photo from \"./photo\";\nimport setPhotoWidth from \"./set-width-helper\";\nimport throttle from \"./throttle\";\nimport getWidth from \"./get-width\";\nimport MidWater from \"./mid-water\";\n\nfunction hasScrollbar() {\n  return document.body.offsetHeight >= window.innerHeight;\n}\n\n// function getIsCollage() {\n//   return getWidth() >= 1100;\n// }\n\nclass Collage extends PureComponent {\n  constructor(props) {\n    super();\n\n    this.updateWidth = this.updateWidth.bind(this);\n    this.renderPhotoGroup = this.renderPhotoGroup.bind(this);\n\n    // this.state = {\n    //   width: getWidth(),\n    // };\n  }\n\n  updateWidth() {\n    this.setState({\n      width: getWidth(),\n    });\n  }\n\n  componentDidMount() {\n    throttle(\"resize\", \"optimizedResize\");\n    window.addEventListener(\"optimizedResize\", this.updateWidth);\n\n    // Force re-calculation of photo height/width if scrollbar is present\n    if (hasScrollbar()) {\n      this.updateWidth();\n    }\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"optimizedResize\", this.updateWidth);\n  }\n\n  renderPhotoGroup(photoGroup) {\n    const { onSelectPhoto } = this.props;\n    // const setDimensions = getIsCollage(); todo\n    const setDimensions = true;\n    const style = setDimensions ? { height: `${photoGroup.height}px` } : {};\n    return (\n      <div\n        class=\"photo-group\"\n        key={`photo-group-${photoGroup.key}`}\n        style={style}\n      >\n        {photoGroup.photos.map((photo) => (\n          <Photo\n            key={photo.key}\n            setWidth={setDimensions}\n            photo={photo}\n            onSelect={onSelectPhoto}\n          />\n        ))}\n      </div>\n    );\n  }\n\n  render() {\n    const { featuredPhotos, nonFeaturedPhotos } = this.props;\n    const featuredPhotoGroups = this.state.width\n      ? setPhotoWidth(featuredPhotos)\n      : featuredPhotos;\n    const nonFeaturedPhotoGroups = this.state.width\n      ? setPhotoWidth(nonFeaturedPhotos)\n      : nonFeaturedPhotos;\n    return (\n      <div id=\"collage\">\n        {featuredPhotoGroups.map(this.renderPhotoGroup)}\n        {!!featuredPhotoGroups.length && <MidWater />}\n        {nonFeaturedPhotoGroups.map(this.renderPhotoGroup)}\n      </div>\n    );\n  }\n}\n\nexport default Collage;\n"]},"metadata":{},"sourceType":"module"}