{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/km/git/splendid-nudibranch/client/src/collage/photo.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { PureComponent } from \"react\";\nimport TransitionImage from \"../transition-image\";\nimport PhotoText from \"../photos/photo-text\";\nimport decorateLink from \"../feature/decorate-link\";\n\nvar Photo = /*#__PURE__*/function (_PureComponent) {\n  _inherits(Photo, _PureComponent);\n\n  var _super = _createSuper(Photo);\n\n  function Photo() {\n    var _this;\n\n    _classCallCheck(this, Photo);\n\n    _this = _super.call(this);\n    _this.onClick = _this.onClick.bind(_assertThisInitialized(_this));\n    _this.state = {\n      inViewport: false\n    };\n    return _this;\n  }\n\n  _createClass(Photo, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var options = {\n        root: null,\n        rootMargin: \"300px\"\n      };\n      var observer = new IntersectionObserver(function (entries, observer) {\n        entries.forEach(function (entry) {\n          if (entry.isIntersecting) {\n            _this2.setState({\n              inViewport: true\n            });\n          }\n        });\n      }, options);\n      observer.observe(this.domElem);\n    }\n  }, {\n    key: \"onClick\",\n    value: function onClick(e) {\n      e.preventDefault();\n      this.props.onSelect(this.props.photo);\n    }\n  }, {\n    key: \"render\",\n    value: function render(_ref, _ref2) {\n      var _this3 = this;\n\n      var photo = _ref.photo,\n          setWidth = _ref.setWidth;\n      var inViewport = _ref2.inViewport;\n      var style = {\n        width: setWidth ? \"\".concat(photo.displayedWidth, \"px\") : \"100%\"\n      };\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: function ref(domElem) {\n          return _this3.domElem = domElem;\n        },\n        \"class\": \"photo\",\n        \"data-photo-key\": photo.key,\n        style: style,\n        children: [/*#__PURE__*/_jsxDEV(\"a\", {\n          href: decorateLink(\"/photos/\".concat(photo.key)),\n          onClick: this.onClick,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            \"class\": \"overlay-title-wrapper\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              \"class\": \"title\",\n              children: photo.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 53,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              \"class\": \"location\",\n              children: photo.location\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 54,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 11\n          }, this), inViewport && /*#__PURE__*/_jsxDEV(TransitionImage, {\n            alt: photo.title,\n            src: photo.sizes.xsmall.url,\n            srcSet: photo.srcSet,\n            sizes: \"(min-width: 1100px) 30vw, 100vw\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sn-dn-ns sn-mb-l\",\n          children: /*#__PURE__*/_jsxDEV(PhotoText, {\n            photo: photo\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 7\n      }, this);\n    }\n  }]);\n\n  return Photo;\n}(PureComponent);\n\nexport default Photo;","map":{"version":3,"sources":["/home/km/git/splendid-nudibranch/client/src/collage/photo.js"],"names":["PureComponent","TransitionImage","PhotoText","decorateLink","Photo","onClick","bind","state","inViewport","options","root","rootMargin","observer","IntersectionObserver","entries","forEach","entry","isIntersecting","setState","observe","domElem","e","preventDefault","props","onSelect","photo","setWidth","style","width","displayedWidth","key","title","location","sizes","xsmall","url","srcSet"],"mappings":";;;;;;;;;;;;;AAAA,SAASA,aAAT,QAA8B,OAA9B;AAEA,OAAOC,eAAP,MAA4B,qBAA5B;AACA,OAAOC,SAAP,MAAsB,sBAAtB;AACA,OAAOC,YAAP,MAAyB,0BAAzB;;IAEMC,K;;;;;AACJ,mBAAc;AAAA;;AAAA;;AACZ;AACA,UAAKC,OAAL,GAAe,MAAKA,OAAL,CAAaC,IAAb,+BAAf;AACA,UAAKC,KAAL,GAAa;AACXC,MAAAA,UAAU,EAAE;AADD,KAAb;AAHY;AAMb;;;;wCAEmB;AAAA;;AAClB,UAAMC,OAAO,GAAG;AACdC,QAAAA,IAAI,EAAE,IADQ;AAEdC,QAAAA,UAAU,EAAE;AAFE,OAAhB;AAKA,UAAMC,QAAQ,GAAG,IAAIC,oBAAJ,CAAyB,UAACC,OAAD,EAAUF,QAAV,EAAuB;AAC/DE,QAAAA,OAAO,CAACC,OAAR,CAAgB,UAACC,KAAD,EAAW;AACzB,cAAIA,KAAK,CAACC,cAAV,EAA0B;AACxB,YAAA,MAAI,CAACC,QAAL,CAAc;AACZV,cAAAA,UAAU,EAAE;AADA,aAAd;AAGD;AACF,SAND;AAOD,OARgB,EAQdC,OARc,CAAjB;AASAG,MAAAA,QAAQ,CAACO,OAAT,CAAiB,KAAKC,OAAtB;AACD;;;4BAEOC,C,EAAG;AACTA,MAAAA,CAAC,CAACC,cAAF;AACA,WAAKC,KAAL,CAAWC,QAAX,CAAoB,KAAKD,KAAL,CAAWE,KAA/B;AACD;;;wCAE2C;AAAA;;AAAA,UAAnCA,KAAmC,QAAnCA,KAAmC;AAAA,UAA5BC,QAA4B,QAA5BA,QAA4B;AAAA,UAAdlB,UAAc,SAAdA,UAAc;AAC1C,UAAMmB,KAAK,GAAG;AACZC,QAAAA,KAAK,EAAEF,QAAQ,aAAMD,KAAK,CAACI,cAAZ,UAAiC;AADpC,OAAd;AAIA,0BACE;AACE,QAAA,GAAG,EAAE,aAACT,OAAD;AAAA,iBAAc,MAAI,CAACA,OAAL,GAAeA,OAA7B;AAAA,SADP;AAEE,iBAAM,OAFR;AAGE,0BAAgBK,KAAK,CAACK,GAHxB;AAIE,QAAA,KAAK,EAAEH,KAJT;AAAA,gCAME;AAAG,UAAA,IAAI,EAAExB,YAAY,mBAAYsB,KAAK,CAACK,GAAlB,EAArB;AAA+C,UAAA,OAAO,EAAE,KAAKzB,OAA7D;AAAA,kCACE;AAAK,qBAAM,uBAAX;AAAA,oCACE;AAAG,uBAAM,OAAT;AAAA,wBAAkBoB,KAAK,CAACM;AAAxB;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE;AAAG,uBAAM,UAAT;AAAA,wBAAqBN,KAAK,CAACO;AAA3B;AAAA;AAAA;AAAA;AAAA,oBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,EAKGxB,UAAU,iBACT,QAAC,eAAD;AACE,YAAA,GAAG,EAAEiB,KAAK,CAACM,KADb;AAEE,YAAA,GAAG,EAAEN,KAAK,CAACQ,KAAN,CAAYC,MAAZ,CAAmBC,GAF1B;AAGE,YAAA,MAAM,EAAEV,KAAK,CAACW,MAHhB;AAIE,YAAA,KAAK,EAAC;AAJR;AAAA;AAAA;AAAA;AAAA,kBANJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBANF,eAqBE;AAAK,UAAA,SAAS,EAAC,kBAAf;AAAA,iCACE,QAAC,SAAD;AAAW,YAAA,KAAK,EAAEX;AAAlB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBArBF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF;AA2BD;;;;EAhEiBzB,a;;AAmEpB,eAAeI,KAAf","sourcesContent":["import { PureComponent } from \"react\";\n\nimport TransitionImage from \"../transition-image\";\nimport PhotoText from \"../photos/photo-text\";\nimport decorateLink from \"../feature/decorate-link\";\n\nclass Photo extends PureComponent {\n  constructor() {\n    super();\n    this.onClick = this.onClick.bind(this);\n    this.state = {\n      inViewport: false,\n    };\n  }\n\n  componentDidMount() {\n    const options = {\n      root: null,\n      rootMargin: \"300px\",\n    };\n\n    const observer = new IntersectionObserver((entries, observer) => {\n      entries.forEach((entry) => {\n        if (entry.isIntersecting) {\n          this.setState({\n            inViewport: true,\n          });\n        }\n      });\n    }, options);\n    observer.observe(this.domElem);\n  }\n\n  onClick(e) {\n    e.preventDefault();\n    this.props.onSelect(this.props.photo);\n  }\n\n  render({ photo, setWidth }, { inViewport }) {\n    const style = {\n      width: setWidth ? `${photo.displayedWidth}px` : \"100%\",\n    };\n\n    return (\n      <div\n        ref={(domElem) => (this.domElem = domElem)}\n        class=\"photo\"\n        data-photo-key={photo.key}\n        style={style}\n      >\n        <a href={decorateLink(`/photos/${photo.key}`)} onClick={this.onClick}>\n          <div class=\"overlay-title-wrapper\">\n            <p class=\"title\">{photo.title}</p>\n            <p class=\"location\">{photo.location}</p>\n          </div>\n          {inViewport && (\n            <TransitionImage\n              alt={photo.title}\n              src={photo.sizes.xsmall.url}\n              srcSet={photo.srcSet}\n              sizes=\"(min-width: 1100px) 30vw, 100vw\"\n            />\n          )}\n        </a>\n\n        <div className=\"sn-dn-ns sn-mb-l\">\n          <PhotoText photo={photo} />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Photo;\n"]},"metadata":{},"sourceType":"module"}