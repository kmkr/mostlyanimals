{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/km/git/splendid-nudibranch/client/src/collage/index.js\";\nimport { PureComponent } from \"react\";\nimport Photo from \"./photo\";\nimport setPhotoWidth from \"./set-width-helper\";\nimport throttle from \"./throttle\";\nimport getWidth from \"./get-width\";\nimport MidWater from \"./mid-water\";\n\nfunction hasScrollbar() {\n  return document.body.offsetHeight >= window.innerHeight;\n}\n\nclass Collage extends PureComponent {\n  constructor(props) {\n    super();\n    this.updateWidth = this.updateWidth.bind(this);\n    this.renderPhotoGroup = this.renderPhotoGroup.bind(this);\n    this.state = {}; // this.state = {\n    //   width: getWidth(),\n    // };\n  }\n\n  getIsCollage() {\n    if (this.state.width) {\n      return getWidth() > 1100;\n    }\n\n    return false;\n  }\n\n  updateWidth() {\n    this.setState({\n      width: getWidth()\n    });\n  }\n\n  componentDidMount() {\n    throttle(\"resize\", \"optimizedResize\");\n    window.addEventListener(\"optimizedResize\", this.updateWidth); // Force re-calculation of photo height/width if scrollbar is present\n    // if (hasScrollbar()) {\n\n    this.updateWidth(); // }\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"optimizedResize\", this.updateWidth);\n  }\n\n  renderPhotoGroup(photoGroup) {\n    const {\n      onSelectPhoto\n    } = this.props;\n    const setDimensions = this.getIsCollage();\n    const style = setDimensions ? {\n      height: `${photoGroup.height}px`\n    } : {};\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"photo-group\",\n      style: style,\n      children: photoGroup.photos.map(photo => /*#__PURE__*/_jsxDEV(Photo, {\n        setWidth: setDimensions,\n        photo: photo,\n        onSelect: onSelectPhoto\n      }, photo.key, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 11\n      }, this))\n    }, `photo-group-${photoGroup.key}`, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this);\n  }\n\n  render() {\n    const {\n      featuredPhotos,\n      nonFeaturedPhotos\n    } = this.props;\n    const featuredPhotoGroups = setPhotoWidth(featuredPhotos);\n    const nonFeaturedPhotoGroups = setPhotoWidth(nonFeaturedPhotos);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"collage\",\n      children: [featuredPhotoGroups.map(this.renderPhotoGroup), !!featuredPhotoGroups.length && /*#__PURE__*/_jsxDEV(MidWater, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 42\n      }, this), nonFeaturedPhotoGroups.map(this.renderPhotoGroup)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Collage;","map":{"version":3,"sources":["/home/km/git/splendid-nudibranch/client/src/collage/index.js"],"names":["PureComponent","Photo","setPhotoWidth","throttle","getWidth","MidWater","hasScrollbar","document","body","offsetHeight","window","innerHeight","Collage","constructor","props","updateWidth","bind","renderPhotoGroup","state","getIsCollage","width","setState","componentDidMount","addEventListener","componentWillUnmount","removeEventListener","photoGroup","onSelectPhoto","setDimensions","style","height","photos","map","photo","key","render","featuredPhotos","nonFeaturedPhotos","featuredPhotoGroups","nonFeaturedPhotoGroups","length"],"mappings":"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","sourcesContent":["import { PureComponent } from \"react\";\n\nimport Photo from \"./photo\";\nimport setPhotoWidth from \"./set-width-helper\";\nimport throttle from \"./throttle\";\nimport getWidth from \"./get-width\";\nimport MidWater from \"./mid-water\";\n\nfunction hasScrollbar() {\n  return document.body.offsetHeight >= window.innerHeight;\n}\n\nclass Collage extends PureComponent {\n  constructor(props) {\n    super();\n\n    this.updateWidth = this.updateWidth.bind(this);\n    this.renderPhotoGroup = this.renderPhotoGroup.bind(this);\n\n    this.state = {};\n\n    // this.state = {\n    //   width: getWidth(),\n    // };\n  }\n\n  getIsCollage() {\n    if (this.state.width) {\n      return getWidth() > 1100;\n    }\n    return false;\n  }\n\n  updateWidth() {\n    this.setState({\n      width: getWidth(),\n    });\n  }\n\n  componentDidMount() {\n    throttle(\"resize\", \"optimizedResize\");\n    window.addEventListener(\"optimizedResize\", this.updateWidth);\n\n    // Force re-calculation of photo height/width if scrollbar is present\n    // if (hasScrollbar()) {\n    this.updateWidth();\n    // }\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"optimizedResize\", this.updateWidth);\n  }\n\n  renderPhotoGroup(photoGroup) {\n    const { onSelectPhoto } = this.props;\n    const setDimensions = this.getIsCollage();\n    const style = setDimensions ? { height: `${photoGroup.height}px` } : {};\n    return (\n      <div\n        className=\"photo-group\"\n        key={`photo-group-${photoGroup.key}`}\n        style={style}\n      >\n        {photoGroup.photos.map((photo) => (\n          <Photo\n            key={photo.key}\n            setWidth={setDimensions}\n            photo={photo}\n            onSelect={onSelectPhoto}\n          />\n        ))}\n      </div>\n    );\n  }\n\n  render() {\n    const { featuredPhotos, nonFeaturedPhotos } = this.props;\n\n    const featuredPhotoGroups = setPhotoWidth(featuredPhotos);\n    const nonFeaturedPhotoGroups = setPhotoWidth(nonFeaturedPhotos);\n    return (\n      <div id=\"collage\">\n        {featuredPhotoGroups.map(this.renderPhotoGroup)}\n        {!!featuredPhotoGroups.length && <MidWater />}\n        {nonFeaturedPhotoGroups.map(this.renderPhotoGroup)}\n      </div>\n    );\n  }\n}\n\nexport default Collage;\n"]},"metadata":{},"sourceType":"module"}