{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { PureComponent } from \"react\";\nimport PhotoText from \"./photo-text\";\nimport TransitionImage from \"../transition-image\";\n\nfunction sizes(photo) {\n  return photo.mode === \"portrait\" ? \"(min-width: 1100px) 50vw, 100vw\" : \"(min-width: 1100px) 95vw, 100vw\";\n}\n\nclass Photo extends PureComponent {\n  constructor(props) {\n    super();\n    this.preload(props.preloadPhotos);\n  }\n\n  componentDidUpdate() {\n    const {\n      preloadPhotos\n    } = this.props;\n    this.preload(preloadPhotos);\n  }\n\n  componentWillUnmount() {\n    if (this.el) {\n      this.el.removeChild(this.el.querySelector(\"img\"));\n    }\n  }\n\n  preload(photos) {\n    if (this.timeout) {\n      window.clearTimeout(this.timeout);\n    }\n\n    this.timeout = setTimeout(() => {\n      photos.forEach((photo, index) => {\n        const image = new Image();\n        image.src = photo.sizes.large.url;\n        image.setAttribute(\"srcset\", photo.srcSet);\n        image.setAttribute(\"sizes\", sizes(photo));\n        const key = `snPreloadedPhoto${index}`;\n        window[key] = image;\n      });\n    }, 1000);\n  }\n\n  render() {\n    const {\n      next,\n      previous,\n      photo\n    } = this.props;\n    return /*#__PURE__*/_jsx(\"div\", {\n      className: photo.mode,\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"photo-and-text\",\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: \"photo-wrapper\",\n          ref: el => this.el = el,\n          children: [previous, next, /*#__PURE__*/_jsx(\"img\", {\n            alt: photo.title,\n            srcSet: photo.srcSet,\n            sizes: sizes(photo)\n          })]\n        }), /*#__PURE__*/_jsx(PhotoText, {\n          photo: photo\n        })]\n      })\n    });\n  }\n\n}\n\nexport default Photo;","map":null,"metadata":{},"sourceType":"module"}